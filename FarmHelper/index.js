villages = [{"target":"486|632", "ID":17779, "origin":"507|627", "launchID":14506, "increment":853252, "unit":"lc", "report":5077007}, {"target":"486|633", "ID":18107, "origin":"505|633", "launchID":18521, "increment":853252, "unit":"lc", "report":-1}, {"target":"487|626", "ID":15210, "origin":"505|633", "launchID":18521, "increment":751258, "unit":"lc", "report":-1}, {"target":"487|632", "ID":18174, "origin":"505|633", "launchID":18521, "increment":896316, "unit":"lc", "report":-1}, {"target":"487|635", "ID":19141, "origin":"505|633", "launchID":18521, "increment":621273, "unit":"lc", "report":-1}, {"target":"488|624", "ID":15563, "origin":"505|633", "launchID":18521, "increment":853252, "unit":"lc", "report":-1}, {"target":"488|634", "ID":15730, "origin":"505|633", "launchID":18521, "increment":1269509, "unit":"lc", "report":-1}, {"target":"488|636", "ID":19061, "origin":"505|633", "launchID":18521, "increment":775433, "unit":"lc", "report":-1}, {"target":"489|620", "ID":16877, "origin":"507|627", "launchID":14506, "increment":948431, "unit":"lc", "report":5077443}, {"target":"489|626", "ID":15495, "origin":"507|627", "launchID":14506, "increment":690267, "unit":"lc", "report":5070555}, {"target":"489|631", "ID":17247, "origin":"507|627", "launchID":14506, "increment":541920, "unit":"lc", "report":5072775}, {"target":"490|618", "ID":13616, "origin":"507|627", "launchID":14506, "increment":764066, "unit":"lc", "report":5077015}, {"target":"490|635", "ID":17591, "origin":"507|627", "launchID":14506, "increment":894763, "unit":"lc", "report":5074612}, {"target":"490|637", "ID":19103, "origin":"507|627", "launchID":14506, "increment":453838, "unit":"lc", "report":5079727}, {"target":"491|624", "ID":14678, "origin":"507|627", "launchID":14506, "increment":673407, "unit":"lc", "report":5060948}, {"target":"491|625", "ID":15728, "origin":"507|627", "launchID":14506, "increment":775433, "unit":"lc", "report":5081867}, {"target":"491|627", "ID":15702, "origin":"507|627", "launchID":14506, "increment":783252, "unit":"lc", "report":5081217}, {"target":"491|639", "ID":20351, "origin":"505|633", "launchID":18521, "increment":802861, "unit":"lc", "report":-1}, {"target":"491|642", "ID":20999, "origin":"505|633", "launchID":18521, "increment":620552, "unit":"lc", "report":-1}, {"target":"491|644", "ID":20557, "origin":"505|633", "launchID":18521, "increment":733590, "unit":"lc", "report":-1}, {"target":"492|613", "ID":12368, "origin":"510|620", "launchID":14503, "increment":592549, "unit":"lc", "report":5065277}, {"target":"492|617", "ID":13364, "origin":"507|627", "launchID":14506, "increment":620552, "unit":"lc", "report":5070559}, {"target":"492|624", "ID":15798, "origin":"507|627", "launchID":14506, "increment":775433, "unit":"lc", "report":5077290}, {"target":"492|628", "ID":15517, "origin":"507|627", "launchID":14506, "increment":901920, "unit":"lc", "report":5075886}, {"target":"492|629", "ID":16522, "origin":"507|627", "launchID":14506, "increment":832477, "unit":"lc", "report":5076418}, {"target":"492|634", "ID":17161, "origin":"507|627", "launchID":14506, "increment":775433, "unit":"lc", "report":5062430}, {"target":"492|640", "ID":19699, "origin":"507|627", "launchID":14506, "increment":739184, "unit":"lc", "report":5080476}, {"target":"492|644", "ID":21065, "origin":"505|633", "launchID":18521, "increment":802861, "unit":"lc", "report":-1}, {"target":"492|646", "ID":24888, "origin":"505|633", "launchID":18521, "increment":1363636, "unit":"lc", "report":-1}, {"target":"492|647", "ID":22315, "origin":"505|633", "launchID":18521, "increment":1175160, "unit":"lc", "report":-1}, {"target":"493|610", "ID":11712, "origin":"510|620", "launchID":14503, "increment":769280, "unit":"lc", "report":5073526}, {"target":"493|612", "ID":12132, "origin":"510|620", "launchID":14503, "increment":769280, "unit":"lc", "report":5065271}, {"target":"493|617", "ID":13238, "origin":"507|627", "launchID":14506, "increment":1269509, "unit":"lc", "report":5065980}, {"target":"493|630", "ID":16495, "origin":"507|627", "launchID":14506, "increment":853252, "unit":"lc", "report":5072440}, {"target":"493|631", "ID":18105, "origin":"507|627", "launchID":14506, "increment":894763, "unit":"lc", "report":5073392}, {"target":"493|647", "ID":22046, "origin":"505|633", "launchID":18521, "increment":764066, "unit":"lc", "report":-1}, {"target":"494|612", "ID":12267, "origin":"507|627", "launchID":14506, "increment":645900, "unit":"lc", "report":5080484}, {"target":"494|626", "ID":15339, "origin":"507|627", "launchID":14506, "increment":645900, "unit":"lc", "report":5076109}, {"target":"494|629", "ID":17199, "origin":"507|627", "launchID":14506, "increment":681245, "unit":"lc", "report":5068773}, {"target":"494|649", "ID":22312, "origin":"505|633", "launchID":18521, "increment":853252, "unit":"lc", "report":-1}, {"target":"495|630", "ID":16899, "origin":"507|627", "launchID":14506, "increment":802861, "unit":"lc", "report":5061883}, {"target":"495|631", "ID":17789, "origin":"507|627", "launchID":14506, "increment":733590, "unit":"lc", "report":5062856}, {"target":"496|647", "ID":22757, "origin":"505|633", "launchID":18521, "increment":839509, "unit":"lc", "report":-1}, {"target":"496|648", "ID":20912, "origin":"505|633", "launchID":18521, "increment":901920, "unit":"lc", "report":-1}, {"target":"497|613", "ID":12481, "origin":"507|627", "launchID":14506, "increment":717184, "unit":"lc", "report":5065974}, {"target":"497|614", "ID":12824, "origin":"507|627", "launchID":14506, "increment":802861, "unit":"lc", "report":5061613}, {"target":"497|617", "ID":11644, "origin":"510|620", "launchID":14503, "increment":1711505, "unit":"lc", "report":-1}, {"target":"497|623", "ID":14431, "origin":"507|627", "launchID":14506, "increment":681245, "unit":"lc", "report":5063767}, {"target":"497|641", "ID":22314, "origin":"507|627", "launchID":14506, "increment":894763, "unit":"lc", "report":-1}, {"target":"498|606", "ID":11718, "origin":"510|620", "launchID":14503, "increment":775433, "unit":"lc", "report":5077870}, {"target":"498|607", "ID":10898, "origin":"510|620", "launchID":14503, "increment":573188, "unit":"lc", "report":5072988}, {"target":"498|609", "ID":11257, "origin":"510|620", "launchID":14503, "increment":1032458, "unit":"lc", "report":5081960}, {"target":"498|617", "ID":13170, "origin":"507|627", "launchID":14506, "increment":769280, "unit":"lc", "report":5078374}, {"target":"498|627", "ID":15535, "origin":"507|627", "launchID":14506, "increment":802861, "unit":"lc", "report":5055176}, {"target":"498|633", "ID":17633, "origin":"507|627", "launchID":14506, "increment":814871, "unit":"lc", "report":5052898}, {"target":"498|641", "ID":19781, "origin":"507|627", "launchID":14506, "increment":637994, "unit":"lc", "report":5062901}, {"target":"498|643", "ID":20909, "origin":"507|627", "launchID":14506, "increment":901920, "unit":"lc", "report":5072300}, {"target":"498|647", "ID":21981, "origin":"505|633", "launchID":18521, "increment":739184, "unit":"lc", "report":-1}, {"target":"499|606", "ID":11765, "origin":"510|620", "launchID":14503, "increment":1187538, "unit":"lc", "report":5075864}, {"target":"499|618", "ID":13330, "origin":"507|627", "launchID":14506, "increment":620552, "unit":"lc", "report":5070800}, {"target":"499|633", "ID":17066, "origin":"507|627", "launchID":14506, "increment":602746, "unit":"lc", "report":5048492}, {"target":"499|642", "ID":19758, "origin":"507|627", "launchID":14506, "increment":1269509, "unit":"lc", "report":5064898}, {"target":"500|607", "ID":11684, "origin":"510|620", "launchID":14503, "increment":585706, "unit":"lc", "report":5068896}, {"target":"500|609", "ID":11642, "origin":"510|620", "launchID":14503, "increment":5000000, "unit":"lc", "report":-1}, {"target":"500|610", "ID":12312, "origin":"507|627", "launchID":14506, "increment":1021578, "unit":"lc", "report":5072470}, {"target":"500|613", "ID":12142, "origin":"507|627", "launchID":14506, "increment":492803, "unit":"lc", "report":5079246}, {"target":"500|618", "ID":13300, "origin":"507|627", "launchID":14506, "increment":564786, "unit":"lc", "report":5081746}, {"target":"500|620", "ID":14360, "origin":"507|627", "launchID":14506, "increment":894763, "unit":"lc", "report":5080659}, {"target":"500|635", "ID":19158, "origin":"507|627", "launchID":14506, "increment":839509, "unit":"lc", "report":5051910}, {"target":"500|637", "ID":16166, "origin":"507|627", "launchID":14506, "increment":764066, "unit":"lc", "report":5060473}, {"target":"501|609", "ID":11724, "origin":"510|620", "launchID":14503, "increment":1919241, "unit":"lc", "report":-1}, {"target":"501|625", "ID":16003, "origin":"507|627", "launchID":14506, "increment":690267, "unit":"lc", "report":5083749}, {"target":"501|634", "ID":17262, "origin":"507|627", "launchID":14506, "increment":1104581, "unit":"lc", "report":5044429}, {"target":"501|635", "ID":18219, "origin":"507|627", "launchID":14506, "increment":802861, "unit":"lc", "report":5048497}, {"target":"501|648", "ID":20442, "origin":"505|633", "launchID":18521, "increment":783252, "unit":"lc", "report":-1}, {"target":"501|652", "ID":23109, "origin":"505|633", "launchID":18521, "increment":1175160, "unit":"lc", "report":-1}, {"target":"502|604", "ID":10223, "origin":"510|620", "launchID":14503, "increment":783252, "unit":"lc", "report":5081741}, {"target":"502|606", "ID":11721, "origin":"510|620", "launchID":14503, "increment":1363636, "unit":"lc", "report":-1}, {"target":"502|611", "ID":12898, "origin":"510|620", "launchID":14503, "increment":1032458, "unit":"lc", "report":5063558}, {"target":"502|615", "ID":13728, "origin":"510|620", "launchID":14503, "increment":853252, "unit":"lc", "report":5077469}, {"target":"502|627", "ID":16167, "origin":"507|627", "launchID":14506, "increment":681245, "unit":"lc", "report":5041776}, {"target":"502|646", "ID":20601, "origin":"507|627", "launchID":14506, "increment":859758, "unit":"lc", "report":5079309}, {"target":"502|647", "ID":20913, "origin":"505|633", "launchID":18521, "increment":1363636, "unit":"lc", "report":-1}, {"target":"502|650", "ID":21569, "origin":"505|633", "launchID":18521, "increment":627780, "unit":"lc", "report":-1}, {"target":"502|652", "ID":23975, "origin":"505|633", "launchID":18521, "increment":809566, "unit":"lc", "report":-1}, {"target":"503|628", "ID":16164, "origin":"507|627", "launchID":14506, "increment":775433, "unit":"lc", "report":5034842}, {"target":"503|636", "ID":17883, "origin":"507|627", "launchID":14506, "increment":815421, "unit":"lc", "report":5047646}, {"target":"503|637", "ID":19143, "origin":"507|627", "launchID":14506, "increment":574531, "unit":"lc", "report":5052661}, {"target":"503|642", "ID":20201, "origin":"507|627", "launchID":14506, "increment":481241, "unit":"lc", "report":5078591}, {"target":"503|643", "ID":20440, "origin":"507|627", "launchID":14506, "increment":853252, "unit":"lc", "report":5062112}, {"target":"504|607", "ID":11310, "origin":"510|620", "launchID":14503, "increment":816115, "unit":"lc", "report":5063737}, {"target":"504|617", "ID":13194, "origin":"507|627", "launchID":14506, "increment":733590, "unit":"lc", "report":5062661}, {"target":"504|618", "ID":13703, "origin":"507|627", "launchID":14506, "increment":690267, "unit":"lc", "report":5060604}, {"target":"504|636", "ID":18194, "origin":"507|627", "launchID":14506, "increment":701065, "unit":"lc", "report":5045808}, {"target":"504|640", "ID":19352, "origin":"507|627", "launchID":14506, "increment":585706, "unit":"lc", "report":5066644}, {"target":"504|646", "ID":20423, "origin":"507|627", "launchID":14506, "increment":783252, "unit":"lc", "report":5077010}, {"target":"504|651", "ID":22232, "origin":"505|633", "launchID":18521, "increment":775433, "unit":"lc", "report":-1}, {"target":"505|602", "ID":10611, "origin":"510|620", "launchID":14503, "increment":564786, "unit":"lc", "report":5073437}, {"target":"505|605", "ID":10781, "origin":"510|620", "launchID":14503, "increment":690267, "unit":"lc", "report":5074520}, {"target":"505|651", "ID":22246, "origin":"505|633", "launchID":18521, "increment":1000000, "unit":"lc", "report":-1}, {"target":"506|607", "ID":11806, "origin":"510|620", "launchID":14503, "increment":5000000, "unit":"lc", "report":-1}, {"target":"506|609", "ID":11437, "origin":"510|620", "launchID":14503, "increment":901920, "unit":"lc", "report":5070561}, {"target":"506|610", "ID":11725, "origin":"510|620", "launchID":14503, "increment":5000000, "unit":"lc", "report":-1}, {"target":"506|612", "ID":13296, "origin":"510|620", "launchID":14503, "increment":645900, "unit":"lc", "report":5075878}, {"target":"506|618", "ID":13260, "origin":"507|627", "launchID":14506, "increment":721775, "unit":"lc", "report":5077122}, {"target":"506|620", "ID":14422, "origin":"507|627", "launchID":14506, "increment":516690, "unit":"lc", "report":5074570}, {"target":"506|639", "ID":18825, "origin":"507|627", "launchID":14506, "increment":661394, "unit":"lc", "report":5059516}, {"target":"506|646", "ID":21056, "origin":"507|627", "launchID":14506, "increment":1187538, "unit":"lc", "report":5075916}, {"target":"506|647", "ID":22403, "origin":"505|633", "launchID":18521, "increment":948431, "unit":"lc", "report":-1}, {"target":"507|603", "ID":10872, "origin":"510|620", "launchID":14503, "increment":809566, "unit":"lc", "report":5067469}, {"target":"507|612", "ID":12928, "origin":"510|620", "launchID":14503, "increment":853252, "unit":"lc", "report":5075658}, {"target":"507|621", "ID":14061, "origin":"507|627", "launchID":14506, "increment":733590, "unit":"lc", "report":5071376}, {"target":"507|623", "ID":14382, "origin":"507|627", "launchID":14506, "increment":520130, "unit":"lc", "report":5075903}, {"target":"507|628", "ID":16045, "origin":"507|627", "launchID":14506, "increment":598418, "unit":"lc", "report":5072741}, {"target":"507|633", "ID":17932, "origin":"507|627", "launchID":14506, "increment":733590, "unit":"lc", "report":5027829}, {"target":"507|634", "ID":17572, "origin":"507|627", "launchID":14506, "increment":681245, "unit":"lc", "report":5032791}, {"target":"507|651", "ID":22052, "origin":"505|633", "launchID":18521, "increment":1104581, "unit":"lc", "report":-1}, {"target":"508|602", "ID":11809, "origin":"510|620", "launchID":14503, "increment":5000000, "unit":"lc", "report":-1}, {"target":"508|612", "ID":12109, "origin":"510|620", "launchID":14503, "increment":853252, "unit":"lc", "report":5075875}, {"target":"508|619", "ID":14883, "origin":"510|620", "launchID":14503, "increment":721775, "unit":"lc", "report":5065029}, {"target":"508|640", "ID":20365, "origin":"507|627", "launchID":14506, "increment":733590, "unit":"lc", "report":5065033}, {"target":"508|646", "ID":21315, "origin":"507|627", "launchID":14506, "increment":948431, "unit":"lc", "report":5075910}, {"target":"508|651", "ID":23053, "origin":"505|633", "launchID":18521, "increment":656912, "unit":"lc", "report":-1}, {"target":"509|607", "ID":11643, "origin":"510|620", "launchID":14503, "increment":896316, "unit":"lc", "report":5081812}, {"target":"509|620", "ID":14923, "origin":"510|620", "launchID":14503, "increment":901920, "unit":"lc", "report":5080460}, {"target":"509|636", "ID":18661, "origin":"507|627", "launchID":14506, "increment":530131, "unit":"lc", "report":5044428}, {"target":"509|638", "ID":20106, "origin":"507|627", "launchID":14506, "increment":604972, "unit":"lc", "report":5054819}, {"target":"509|639", "ID":19124, "origin":"507|627", "launchID":14506, "increment":1104581, "unit":"lc", "report":5060265}, {"target":"510|604", "ID":10921, "origin":"510|620", "launchID":14503, "increment":815421, "unit":"lc", "report":5079833}, {"target":"510|613", "ID":12344, "origin":"510|620", "launchID":14503, "increment":733590, "unit":"lc", "report":5072019}, {"target":"510|626", "ID":16579, "origin":"507|627", "launchID":14506, "increment":564786, "unit":"lc", "report":5058776}, {"target":"510|631", "ID":16550, "origin":"507|627", "launchID":14506, "increment":832477, "unit":"lc", "report":5034862}, {"target":"510|641", "ID":20759, "origin":"507|627", "launchID":14506, "increment":585706, "unit":"lc", "report":5072029}, {"target":"510|642", "ID":19752, "origin":"507|627", "launchID":14506, "increment":643726, "unit":"lc", "report":5077292}, {"target":"510|649", "ID":20443, "origin":"505|633", "launchID":18521, "increment":1104581, "unit":"lc", "report":-1}, {"target":"510|651", "ID":22813, "origin":"505|633", "launchID":18521, "increment":814871, "unit":"lc", "report":-1}, {"target":"511|606", "ID":11808, "origin":"510|620", "launchID":14503, "increment":497447, "unit":"lc", "report":5072726}, {"target":"511|619", "ID":13658, "origin":"510|620", "launchID":14503, "increment":859758, "unit":"lc", "report":5060534}, {"target":"511|625", "ID":16232, "origin":"507|627", "launchID":14506, "increment":717184, "unit":"lc", "report":5080623}, {"target":"512|603", "ID":11211, "origin":"510|620", "launchID":14503, "increment":621956, "unit":"lc", "report":5070365}, {"target":"512|606", "ID":11842, "origin":"510|620", "launchID":14503, "increment":894763, "unit":"lc", "report":5074009}, {"target":"512|612", "ID":12339, "origin":"510|620", "launchID":14503, "increment":699001, "unit":"lc", "report":5080133}, {"target":"512|635", "ID":17845, "origin":"507|627", "launchID":14506, "increment":815421, "unit":"lc", "report":5045526}, {"target":"512|639", "ID":20132, "origin":"507|627", "launchID":14506, "increment":859758, "unit":"lc", "report":5064819}, {"target":"512|640", "ID":20794, "origin":"507|627", "launchID":14506, "increment":524425, "unit":"lc", "report":5069874}, {"target":"512|641", "ID":20520, "origin":"507|627", "launchID":14506, "increment":598418, "unit":"lc", "report":5074956}, {"target":"512|651", "ID":23965, "origin":"505|633", "launchID":18521, "increment":894763, "unit":"lc", "report":-1}, {"target":"513|604", "ID":10573, "origin":"510|620", "launchID":14503, "increment":564786, "unit":"lc", "report":5066202}, {"target":"513|605", "ID":11197, "origin":"510|620", "launchID":14503, "increment":859758, "unit":"lc", "report":5080686}, {"target":"513|609", "ID":11502, "origin":"510|620", "launchID":14503, "increment":751258, "unit":"lc", "report":5075572}, {"target":"513|620", "ID":14033, "origin":"510|620", "launchID":14503, "increment":948431, "unit":"lc", "report":5069133}, {"target":"513|621", "ID":15061, "origin":"510|620", "launchID":14503, "increment":764066, "unit":"lc", "report":5070072}, {"target":"513|643", "ID":20060, "origin":"507|627", "launchID":14506, "increment":645900, "unit":"lc", "report":5074758}, {"target":"514|614", "ID":11810, "origin":"510|620", "launchID":14503, "increment":1363636, "unit":"lc", "report":-1}, {"target":"514|625", "ID":15524, "origin":"507|627", "launchID":14506, "increment":537104, "unit":"lc", "report":5070687}, {"target":"514|628", "ID":16143, "origin":"507|627", "launchID":14506, "increment":616604, "unit":"lc", "report":5074836}, {"target":"514|635", "ID":19457, "origin":"507|627", "launchID":14506, "increment":853252, "unit":"lc", "report":5055174}, {"target":"514|646", "ID":20723, "origin":"505|633", "launchID":18521, "increment":901920, "unit":"lc", "report":-1}, {"target":"515|605", "ID":9519, "origin":"510|620", "launchID":14503, "increment":2142857, "unit":"lc", "report":-1}, {"target":"515|610", "ID":12453, "origin":"510|620", "launchID":14503, "increment":733590, "unit":"lc", "report":5074611}, {"target":"515|625", "ID":15168, "origin":"507|627", "launchID":14506, "increment":604972, "unit":"lc", "report":5064684}, {"target":"515|626", "ID":16383, "origin":"507|627", "launchID":14506, "increment":620552, "unit":"lc", "report":5071580}, {"target":"515|646", "ID":20493, "origin":"505|633", "launchID":18521, "increment":696031, "unit":"lc", "report":-1}, {"target":"515|650", "ID":22293, "origin":"505|633", "launchID":18521, "increment":2142857, "unit":"lc", "report":-1}, {"target":"516|610", "ID":11923, "origin":"510|620", "launchID":14503, "increment":769280, "unit":"lc", "report":5077029}, {"target":"516|614", "ID":12784, "origin":"507|627", "launchID":14506, "increment":690267, "unit":"lc", "report":5080126}, {"target":"516|617", "ID":13751, "origin":"510|620", "launchID":14503, "increment":853252, "unit":"lc", "report":5078377}, {"target":"516|622", "ID":15520, "origin":"510|620", "launchID":14503, "increment":1021578, "unit":"lc", "report":5061220}, {"target":"516|626", "ID":15774, "origin":"507|627", "launchID":14506, "increment":769280, "unit":"lc", "report":5072394}, {"target":"516|631", "ID":18286, "origin":"507|627", "launchID":14506, "increment":886779, "unit":"lc", "report":5065908}, {"target":"516|636", "ID":18213, "origin":"507|627", "launchID":14506, "increment":990038, "unit":"lc", "report":5067116}, {"target":"517|603", "ID":10503, "origin":"510|620", "launchID":14503, "increment":896316, "unit":"lc", "report":5078341}, {"target":"517|606", "ID":11823, "origin":"510|620", "launchID":14503, "increment":551680, "unit":"lc", "report":5080181}, {"target":"517|629", "ID":16552, "origin":"507|627", "launchID":14506, "increment":721775, "unit":"lc", "report":5073955}, {"target":"517|631", "ID":17933, "origin":"507|627", "launchID":14506, "increment":723409, "unit":"lc", "report":5071375}, {"target":"517|637", "ID":19060, "origin":"507|627", "launchID":14506, "increment":600972, "unit":"lc", "report":5073964}]

function displayDate(date) {
    display = new Date(date.getTime())
    display.setHours(display.getHours() + 1)

    return display.toUTCString().slice(0, -3);
}

function initialize() {
    for (let i = 0; i < villages.length; i++) {
        date = new Date();
        date_ms = date.getTime();
        launch = new Date(date_ms); villages[i].launch = launch;
    }

    sortVillages();
    displayVillages();

    document.getElementById("increment").addEventListener("click", addLaunchToAll);

    document.getElementById("opentabs").addEventListener("click", openTabs);
    document.getElementById("update-tabs").addEventListener("click", updateTabs);

}

function addLaunchToAll() {
    console.log("hi")
    for (let i = 0; i < villages.length; i++) {
        date_ms = villages[i].launch.getTime()
        villages[i].launch = new Date(date_ms + villages[i].increment);

        timeStr = document.getElementById(villages[i].ID + "d")
        timeStr.innerHTML = displayDate(villages[i].launch);
        reorder(villages[i].ID);
    }
}

function sortVillages() {
    villages = villages.sort((v1, v2) => (v1.launch > v2.launch) ? 1 : (v1.launch < v2.launch) ? -1 : 0);
}

function displayVillages() {
    wrapper = document.getElementById("villageList");

    for (let i = 0; i < villages.length; i++) {
        div = document.createElement("div");
        div.id = villages[i].ID;
        div.className = "village"

        launchFrom = document.createElement("a");
        launchFrom.setAttribute("href", "https://en129.tribalwars.net/game.php?village=" + villages[i].launchID + "&screen=overview");
        launchFrom.setAttribute("target", "_blank");

        launchTo = document.createElement("a");
        launchTo.setAttribute("href", "https://en129.tribalwars.net/game.php?village=" + villages[i].launchID + "&screen=info_village&id=" + villages[i].ID);
        launchTo.setAttribute("target", "_blank");

        launchTime = document.createElement("span");

        launchButton = document.createElement("a");
        launchButton.className = "button";
        launchButton.id = villages[i].ID + "b";

        launchFrom.innerHTML = villages[i].origin;
        launchTo.innerHTML = villages[i].target;

        launchButton.innerHTML = "SEND";

        if (villages[i].report > 0) {
            link = "https://en129.tribalwars.net/game.php?village=" + villages[i].launchID + "&screen=place&try=confirm&type=same&report_id=" + villages[i].report;
        } else {
            link = villages[i].unit == "lc" ? "https://en129.tribalwars.net/game.php?village=" + villages[i].launchID + "&screen=place&target=" + villages[i].ID + "&light=1" : "https://en129.tribalwars.net/game.php?village=" + villages[i].launchID + "&screen=place&target=" + villages[i].ID + "&spear=2&sword=2";
        }
        // console.log(link);

        launchButton.setAttribute("href", link);
        launchButton.setAttribute("target", "_blank");

        launchTime.innerHTML = displayDate(villages[i].launch);
        launchTime.id = villages[i].ID + "d"

        div.appendChild(launchFrom);
        div.appendChild(launchTo);
        div.appendChild(launchTime);
        div.appendChild(launchButton);

        wrapper.appendChild(div);
    }
}

function addButtonClick() {
    btns = document.querySelectorAll(".button");
    for (let i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", sendFarm);
    }
}

function buttonState() {

    current = new Date()
    console.log(current)
    for (let i = 0; i < villages.length; i++) {
        btn = document.getElementById(villages[i].ID + "b");
        div = document.getElementById(villages[i].ID)
        launch = villages[i].launch;
        // console.log(current,launch)
        if (launch > current) {
            div.style.display = "none";
        } else {
            div.style.display = "flex";
        }
    }
}

function setIntervals() {
    btnState = setInterval(buttonState, 500);
}

function sendFarm() {
    id = this.id.slice(0, -1);
    timeDiv = document.getElementById(id + "d");
    btnDiv = document.getElementById(id + "b");

    for (let i = 0; i < villages.length; i++) {
        if (villages[i].ID == id) {
            ms = villages[i].launch.getTime();
            ms += villages[i].increment;

            villages[i].launch = new Date(ms);

            timeDiv.innerHTML = displayDate(villages[i].launch);

            reorder(id);
        }
    }
}

function reorder(id) {
    divs = document.querySelectorAll(".village");

    for (let i = 0; i < villages.length; i++) {
        if (villages[i].ID == id) {
            launch = villages[i].launch;
        }
    }

    done = false;
    for (let i = 0; i < divs.length; i++) {
        divID = divs[i].id;
        for (let j = 0; j < villages.length; j++) {
            if (villages[j].ID == divID) {
                launchCheck = villages[j].launch;
                if (launch < launchCheck && done == false) {
                    done = true;
                    document.getElementById("villageList").insertBefore(document.getElementById(id), document.getElementById(divID));
                }
                break;
            }
        }
    }
}

const timer = ms => new Promise(res => setTimeout(res, ms));

numTabs = 10;
tabDelay = 200;

async function openTabs() {

    let count = 0;
    date = new Date()
    for (let i = 0; i < villages.length; i++) {
        if (date > villages[i].launch) {
            count += 1;

            l = document.getElementById(villages[i].ID+"b");
            l.click();

            ms = villages[i].launch.getTime();
            ms += villages[i].increment;

            villages[i].launch = new Date(ms);
            console.log(villages[i].target)

            await timer(tabDelay);

            if (count >= numTabs) {
                break;
            }
        }
    }
}

function updateTabs() {
    numTabsTEMP = Number(document.getElementById('tabNumber').value);
    tabDelayTEMP = Number(document.getElementById('tabDelay').value);
    
    console.log(numTabsTEMP, tabDelayTEMP, numTabs, tabDelay);

    if(numTabsTEMP > 0){
        numTabs = numTabsTEMP;
    }
    if(tabDelayTEMP > 0){
        tabDelay = tabDelayTEMP;
    }

    console.log(numTabsTEMP, tabDelayTEMP, numTabs, tabDelay);

    document.getElementById('opentabs').innerHTML = "Open Up To "+numTabs+" Tabs";
}